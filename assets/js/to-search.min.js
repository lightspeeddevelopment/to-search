LSX_TO_Search={facetWpLoadFirstTime:!1,currentForm:!1,initThis:function(){currentForm=jQuery(".to-search-form"),this.onChangeTab_Map(),this.onFacetWpLoad(),console.log(currentForm),void 0!=currentForm&&(this.watchSubmit(),void 0!=currentForm.find(".search-field")&&this.watchSearchInput(),void 0!=currentForm.find(".btn-dropdown")&&this.watchDropdown())},onChangeTab_Map:function(){jQuery('a[data-toggle="tab"][href="#to-search-map"]').on("shown.bs.tab",LSX_TO_Search.reloadMap)},onFacetWpLoad:function(){"undefined"!=typeof FWP&&(FWP.loading_handler=function(){jQuery("body").addClass("facetwp-loading-body"),jQuery("#secondary, #primary").css("opacity",.5)}),this.facetWpLoadFirstTime=!1,jQuery(document).on("facetwp-loaded",function(){if(jQuery("body").removeClass("facetwp-loading-body"),jQuery("#secondary, #primary").css("opacity",""),!LSX_TO_Search.facetWpLoadFirstTime)return void(LSX_TO_Search.facetWpLoadFirstTime=!0);var e=jQuery(".facetwp-template").offset().top-250;jQuery("html, body").animate({scrollTop:e},400),LSX_TO_Search.onChangeTab_Map(),""===jQuery(".lsx-map-preview").html()&&LSX_TO_Search.reloadMap()})},reloadMap:function(){void 0!==LSX_TO_Maps&&(LSX_TO_Maps.initThis(),LSX_TO_Maps_Styles.changeMapColors())},watchDropdown:function(){jQuery(currentForm).find(".dropdown-menu").on("click","a",function(e){e.preventDefault(),jQuery(this).parents(".dropdown").find(".btn-dropdown").attr("data-selection",jQuery(this).attr("data-value")),jQuery(this).parents(".dropdown").find(".btn-dropdown").html(jQuery(this).html()+' <span class="caret"></span>'),jQuery(this).hasClass("default")?jQuery(this).parent("li").hide():jQuery(this).parents("ul").find(".default").parent("li").show()})},watchSubmit:function(){jQuery(currentForm).on("submit",function(e){void 0!=jQuery(this).find(".btn-dropdown")&&jQuery(this).find(".btn-dropdown").each(function(){var e=jQuery(this).attr("data-selection");if(0!=e||"0"!=e){var r=jQuery("<input>").attr("type","hidden").attr("name",jQuery(this).attr("id")).val(e);jQuery(currentForm).append(jQuery(r))}}),void 0!=jQuery(this).find(".search-field")&&""==jQuery(this).find(".search-field").val()&&(jQuery(this).find(".search-field").addClass("error"),e.preventDefault())})},watchSearchInput:function(){jQuery(currentForm).find(".search-field").on("keyup",function(e){jQuery(this).hasClass("error")&&jQuery(this).removeClass("error")})}},jQuery(function(){LSX_TO_Search.initThis()});