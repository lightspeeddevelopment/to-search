"use strict";var LSX_TO_Search={facetWpLoadFirstTime:!1,currentForm:!1,initThis:function(e){this.currentForm=jQuery(".to-search-form"),this.onChangeTab_Map(),this.onFacetWpLoad(),e<768&&this.mobileFilters(),null!=this.currentForm&&(this.watchSubmit(),null!=this.currentForm.find(".search-field")&&this.watchSearchInput(),null!=this.currentForm.find(".btn-dropdown")&&this.watchDropdown())},onChangeTab_Map:function(){jQuery('a[data-toggle="tab"][href="#to-search-map"]').on("shown.bs.tab",LSX_TO_Search.reloadMap)},onFacetWpLoad:function(){this.facetWpLoadFirstTime=!1,jQuery(window).on("facetwp-loaded",function(){if(jQuery("body").removeClass("facetwp-loading-body"),jQuery("#secondary, #primary").css({opacity:"","pointer-events":""}),""==FWP.build_query_string()?jQuery(".facetwp-results-clear-btn").addClass("hidden"):jQuery(".facetwp-results-clear-btn").removeClass("hidden"),jQuery.each(FWP.settings,function(e,t){if("price"===e||"duration"===e){var a=jQuery(".facetwp-facet-"+e).closest(".facetwp-item");t.range.min===t.range.max?a.addClass("hidden"):a.removeClass("hidden")}}),jQuery.each(FWP.settings.num_choices,function(e,t){var a=jQuery(".facetwp-facet-"+e).closest(".facetwp-item");0===t?a.addClass("hidden"):a.removeClass("hidden")}),0<jQuery(".facetwp-filters-wrap .row .facetwp-item").not(".hidden").length&&0<jQuery(".facetwp-filters-wrap .row .facetwp-item").not(".hidden").first().length&&(jQuery(".facetwp-filters-wrap .row .facetwp-item").not(".hidden").find("button.facetwp-collapse").first().attr("aria-expanded","true"),jQuery(".facetwp-filters-wrap .row .facetwp-item").not(".hidden").find(".collapse").first().addClass("in")),jQuery(".facetwp-checkbox.checked").each(function(){var e=jQuery(this).parents(".facetwp-item");e.find("button.facetwp-collapse").attr("aria-expanded","true"),e.find(".collapse").addClass("in")}),!0!==LSX_TO_Search.facetWpLoadFirstTime){if(LSX_TO_Search.facetWpLoadFirstTime=!0,LSX_TO_Search.checkForFacets(),FWP.fetch_data(),void 0!==FWP&&void 0!==FWP.settings&&void 0!==FWP.settings.pager&&void 0!==FWP.settings.pager.total_rows&&0===FWP.settings.pager.total_rows&&jQuery("body").addClass("search-no-results"),void 0!==lsx_to_search_params&&!0===lsx_to_search_params.scrollOnLoad){var e=0<jQuery(".facetwp-facet").length?jQuery(".facetwp-facet").offset().top:jQuery(".facetwp-template").offset().top;e-=250,jQuery("html, body").animate({scrollTop:e},400)}LSX_TO_Search.onChangeTab_Map(),""===jQuery(".lsx-map-preview").html()&&LSX_TO_Search.reloadMap()}else void 0!==FWP&&void 0!==FWP.settings&&void 0!==FWP.settings.pager&&void 0!==FWP.settings.pager.total_rows&&0===FWP.settings.pager.total_rows&&jQuery("body").addClass("search-no-results")}),jQuery(window).on("facetwp-refresh",function(){jQuery("body").addClass("facetwp-loading-body"),jQuery("#secondary, #primary").css({opacity:.5,"pointer-events":"none"})})},checkForFacets:function(){if(void 0!==lsx_to_search_params&&!1!==lsx_to_search_params.facets&&""!==lsx_to_search_params.facets)for(var e in lsx_to_search_params.facets)lsx_to_search_params.facets.hasOwnProperty(e)&&void 0!==FWP.facets[e]&&(console.log(lsx_to_search_params.facets[e]),FWP.facets[e]=lsx_to_search_params.facets[e])},mobileFilters:function(){0<jQuery(".facetwp-template").length&&(jQuery(".facetwp-filters-wrap").slideAndSwipe(),FWP.auto_refresh=!1,jQuery(".ssm-close-btn").on("click",function(){FWP.is_refresh=!0,jQuery(document).trigger("facetwp-refresh"),FWP.fetch_data(),FWP.is_refresh=!1}),jQuery(".ssm-apply-btn").on("click",function(){FWP.refresh()}),jQuery(document).on("facetwp-refresh",function(){jQuery(".facetwp-filters-wrap").each(function(){jQuery(this).data("plugin_slideAndSwipe").hideNavigation()})}))},reloadMap:function(){void 0!==LSX_TO_Maps&&LSX_TO_Maps.initThis()},watchDropdown:function(){var t=this;jQuery(this.currentForm).find(".dropdown-menu").on("click","a",function(e){e.preventDefault(),jQuery(this).parents(".dropdown").find(".btn-dropdown").attr("data-selection",jQuery(this).attr("data-value")),jQuery(this).parents(".dropdown").find(".btn-dropdown").html(jQuery(this).html()+' <span class="caret"></span>'),jQuery(this).hasClass("default")?jQuery(this).parent("li").hide():jQuery(this).parents("ul").find(".default").parent("li").show(),jQuery(this).parents(".field").hasClass("combination-dropdown")&&t.switchDropDown(jQuery(this).parents(".dropdown")),jQuery(this).parents(".field").hasClass("engine-select")&&t.switchEngine(jQuery(this).parents(".dropdown"))})},watchSubmit:function(){var a=this.currentForm;jQuery(this.currentForm).on("submit",function(e){null!=jQuery(this).find(".btn-dropdown:not(.btn-combination)")&&jQuery(this).find(".btn-dropdown:not(.btn-combination)").each(function(){var e=jQuery(this).attr("data-selection");if(0!=e||"0"!=e){var t=jQuery("<input>").attr("type","hidden").attr("name",jQuery(this).attr("id")).val(e);jQuery(a).append(jQuery(t))}})})},watchSearchInput:function(){jQuery(this.currentForm).find(".search-field").on("keyup",function(e){jQuery(this).hasClass("error")&&jQuery(this).removeClass("error")})},switchDropDown:function(e){var t=e.find("button").attr("data-selection");if(0<e.parents("form").find(".combination-toggle.selected").length){e.parents("form").find(".combination-toggle.selected button").attr("data-selection","0");var a=e.parents("form").find(".combination-toggle.selected a.default").html();e.parents("form").find(".combination-toggle.selected button").html(a+' <span class="caret"></span>'),e.parents("form").find(".combination-toggle.selected").removeClass("selected").addClass("hidden")}e.parents("form").find("#"+t).parents(".combination-toggle").removeClass("hidden").addClass("selected")},switchEngine:function(e){e.find("button").attr("data-selection");if(0<e.parents("form").find(".combination-toggle.selected").length){e.parents("form").find(".combination-toggle.selected button").attr("data-selection","0");var t=e.parents("form").find(".combination-toggle.selected a.default").html();e.parents("form").find(".combination-toggle.selected button").html(t+' <span class="caret"></span>'),e.parents("form").find(".combination-toggle.selected").removeClass("selected").addClass("hidden")}e.parents("form").attr("engine")}};jQuery(function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;LSX_TO_Search.initThis(e)});